ONE:  WORD 0x1, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0
TIME: WORD 0x9, 0x0, 0x1, 0x2, 0x3, 0x4, 0x5, 0x2

ONE_START: WORD $ONE
TIME_START: WORD $TIME
XP_I: WORD 0x0
N: WORD 0x0
OPER_POS1: WORD 0x0
OPER_POS2: WORD 0x0
LOOP_COUNTER: WORD 0x0
NUMBER_LENGTH: WORD 0x8

START:
CALL INC_TIME


LD TIME_START
PUSH
CALL SHOW
JUMP START




INC_TIME: 
LD ONE_START
PUSH
CALL PLUS
RET


SHOW: LD #0x8
ST N
LD &0x1
ST XP_I

PRINT_LOOP:
LD #0x8
SUB N
ASL
ASL
ASL
ASL
ADD (XP_I)+
PUSH
S1: IN 0x15
AND #0x40
BEQ S1
POP
OUT 0x14
LOOP N
JUMP PRINT_LOOP
SWAP
ST &0x1
POP					;SWAP x2
RET



PLUS:
LD &0x1
ST OPER_POS1
ADD NUMBER_LENGTH
ST OPER_POS2
LD NUMBER_LENGTH
ST LOOP_COUNTER
CLC
LOOPP:
LD (OPER_POS1)+
ADC (OPER_POS2)
CMP #0xA
BMI CHANGE_PL				  ;>=10
ADD #0x6
CLC
CMC
CHANGE_PL: 
AND #0xF

ST (OPER_POS2)+
LOOP LOOP_COUNTER
JUMP LOOPP

SWAP
ST &0x1
SWAP

SWAP
POP
RET
